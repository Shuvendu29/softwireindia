<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - SoftWire India</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore-compat.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css?v=20251004">
    <style>
        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: var(--bg-primary);
            min-height: 100vh;
        }
        
        .admin-header {
            background: linear-gradient(135deg, #1a1a1a, #333);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: var(--bg-secondary);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            border-left: 4px solid var(--primary-color);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-weight: 600;
        }
        
        .admin-nav {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .admin-tab {
            padding: 12px 24px;
            background: var(--bg-secondary);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            color: var(--text-primary);
        }
        
        .admin-tab.active {
            background: var(--primary-color);
            color: white;
        }
        
        .orders-table {
            width: 100%;
            background: var(--bg-secondary);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .orders-table th,
        .orders-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--bg-tertiary);
        }
        
        .orders-table th {
            background: var(--bg-tertiary);
            font-weight: 700;
            color: var(--text-primary);
        }
        
        .orders-table tr:hover {
            background: var(--bg-tertiary);
        }
        
        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .priority-high { color: #dc3545; }
        .priority-medium { color: #ffc107; }
        .priority-low { color: #28a745; }
        
        .order-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }
        
        .modal-content {
            background: var(--bg-secondary);
            padding: 30px;
            border-radius: 15px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn-small {
            padding: 6px 12px;
            font-size: 0.8rem;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-view {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-update {
            background: #28a745;
            color: white;
        }
        
        .btn-contact {
            background: #17a2b8;
            color: white;
        }
        
        .customers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .customer-card {
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 12px;
            border: 2px solid var(--bg-tertiary);
            transition: all 0.3s ease;
        }
        
        .customer-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }
        
        .filter-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .filter-select {
            padding: 8px 12px;
            border: 2px solid var(--bg-tertiary);
            border-radius: 6px;
            background: var(--bg-primary);
            color: var(--text-primary);
        }
        
        .search-input {
            padding: 8px 12px;
            border: 2px solid var(--bg-tertiary);
            border-radius: 6px;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-width: 200px;
        }
        
        @media (max-width: 768px) {
            .admin-container {
                padding: 15px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .orders-table {
                font-size: 0.9rem;
            }
            
            .orders-table th,
            .orders-table td {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- Admin Header -->
        <div class="admin-header">
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
                <div>
                    <h1>üõ°Ô∏è Admin Panel</h1>
                    <p style="opacity: 0.9; margin: 5px 0 0 0;">SoftWire India - Order & Customer Management</p>
                </div>
                <div style="display: flex; gap: 15px; align-items: center;">
                    <button onclick="window.location.href='index.html'" class="btn-secondary">
                        üè† Home
                    </button>
                    <button onclick="handleAdminLogout()" class="btn-secondary">
                        üö™ Logout
                    </button>
                </div>
            </div>
        </div>

        <!-- Statistics Dashboard -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="totalOrders">0</div>
                <div class="stat-label">Total Orders</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="pendingOrders">0</div>
                <div class="stat-label">Pending Orders</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalCustomers">0</div>
                <div class="stat-label">Total Customers</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="supportTickets">0</div>
                <div class="stat-label">Support Tickets</div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="admin-nav">
            <button class="admin-tab active" onclick="showAdminTab('orders')">
                üìã Orders Management
            </button>
            <button class="admin-tab" onclick="showAdminTab('customers')">
                üë• Customers
            </button>
            <button class="admin-tab" onclick="showAdminTab('support')">
                üí¨ Support Tickets
            </button>
            <button class="admin-tab" onclick="showAdminTab('analytics')">
                üìä Analytics
            </button>
        </div>

        <!-- Tab Contents -->
        <div class="dashboard-content">
            <!-- Orders Management Tab -->
            <div id="orders" class="tab-content active">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2>Orders Management</h2>
                    <button onclick="refreshOrders()" class="btn-primary">üîÑ Refresh</button>
                </div>
                
                <div class="filter-bar">
                    <select class="filter-select" id="statusFilter" onchange="filterOrders()">
                        <option value="">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="in-progress">In Progress</option>
                        <option value="completed">Completed</option>
                        <option value="cancelled">Cancelled</option>
                    </select>
                    
                    <input type="text" class="search-input" id="orderSearch" 
                           placeholder="Search orders..." onkeyup="searchOrders()">
                </div>
                
                <div style="overflow-x: auto;">
                    <table class="orders-table">
                        <thead>
                            <tr>
                                <th>Order #</th>
                                <th>Customer</th>
                                <th>Project</th>
                                <th>Services</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTableBody">
                            <!-- Orders will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Customers Tab -->
            <div id="customers" class="tab-content">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2>Customer Management</h2>
                    <button onclick="refreshCustomers()" class="btn-primary">üîÑ Refresh</button>
                </div>
                
                <div class="filter-bar">
                    <input type="text" class="search-input" id="customerSearch" 
                           placeholder="Search customers..." onkeyup="searchCustomers()">
                </div>
                
                <div class="customers-grid" id="customersGrid">
                    <!-- Customers will be loaded here -->
                </div>
            </div>

            <!-- Support Tickets Tab -->
            <div id="support" class="tab-content">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2>Support Tickets</h2>
                    <button onclick="refreshSupport()" class="btn-primary">üîÑ Refresh</button>
                </div>
                
                <div class="filter-bar">
                    <select class="filter-select" id="supportStatusFilter" onchange="filterSupport()">
                        <option value="">All Status</option>
                        <option value="open">Open</option>
                        <option value="in-progress">In Progress</option>
                        <option value="closed">Closed</option>
                    </select>
                    
                    <select class="filter-select" id="priorityFilter" onchange="filterSupport()">
                        <option value="">All Priority</option>
                        <option value="urgent">Urgent</option>
                        <option value="high">High</option>
                        <option value="medium">Medium</option>
                        <option value="low">Low</option>
                    </select>
                </div>
                
                <div style="overflow-x: auto;">
                    <table class="orders-table">
                        <thead>
                            <tr>
                                <th>Ticket #</th>
                                <th>Customer</th>
                                <th>Subject</th>
                                <th>Priority</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="supportTableBody">
                            <!-- Support tickets will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="analytics" class="tab-content">
                <h2>Analytics Dashboard</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="monthlyOrders">0</div>
                        <div class="stat-label">This Month's Orders</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="monthlyRevenue">‚Çπ0</div>
                        <div class="stat-label">Estimated Monthly Revenue</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="conversionRate">0%</div>
                        <div class="stat-label">Conversion Rate</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="avgOrderValue">‚Çπ0</div>
                        <div class="stat-label">Avg. Order Value</div>
                    </div>
                </div>
                
                <div style="background: var(--bg-secondary); padding: 30px; border-radius: 15px; margin-top: 30px;">
                    <h3>Popular Services</h3>
                    <div id="popularServices">
                        <!-- Popular services will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Order Details Modal -->
    <div class="order-modal" id="orderModal">
        <div class="modal-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 id="modalOrderTitle">Order Details</h2>
                <button onclick="closeOrderModal()" class="btn-secondary">‚úï</button>
            </div>
            <div id="modalOrderContent">
                <!-- Order details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/firebase-config.js?v=20251004"></script>
    <script src="js/admin-panel.js?v=20251004"></script>
</body>
</html>